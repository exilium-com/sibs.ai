import{d as I,l as R,W as V,S as z,r as i,b as m,c as l,w as e,y as d,e as n,R as P,x as U,m as A,X as f,k as S}from"./main-CuD3QBrw.js";const $=I({__name:"rating-popup",props:{initialRating:{},initialComment:{},messageIndex:{}},setup(h){const r=h,t=R({ratingPopup:!1,rating:r.initialRating??0,comment:r.initialComment??""});let u=t.rating,p=t.comment,x=["thumbs-down","thumbs-none","thumbs-up"];function v(){const o=A();if(!o.currentAccount){console.error("no current account");return}if(!o.chatId){console.error("no chat id");return}(t.rating!=u||t.comment!=p)&&(r.messageIndex==null?f("/api/chat/{account_id}/{chat_id}/summary",{params:{path:{account_id:o.currentAccount.id,chat_id:o.chatId}},body:{rating:t.rating,comment:t.comment}}).then(()=>{u=t.rating,p=t.comment}):f("/api/chat/{account_id}/{chat_id}",{params:{path:{account_id:o.currentAccount.id,chat_id:o.chatId},query:{message_index:r.messageIndex}},body:{rating:t.rating,comment:t.comment}}).then(()=>{u=t.rating,p=t.comment}))}return V(()=>{v()}),z(()=>{v()}),(o,a)=>{const c=i("v-icon"),_=i("v-btn"),g=i("v-col"),b=i("v-text-field"),C=i("v-row"),y=i("v-container"),k=i("v-card"),w=i("v-menu");return o.gDevMode?(m(),l(_,{key:0,icon:"",variant:"plain",onClick:a[3]||(a[3]=s=>t.ratingPopup=!t.ratingPopup),class:P(U(x)[t.rating+1]),size:"x-small"},{default:e(()=>[t.rating==-1?(m(),l(c,{key:0,icon:"mdi-thumb-down"})):d("",!0),t.rating==0?(m(),l(c,{key:1,icon:"mdi-thumb-up-outline"})):d("",!0),t.rating==1?(m(),l(c,{key:2,icon:"mdi-thumb-up"})):d("",!0),n(w,{activator:"parent"},{default:e(()=>[n(k,null,{default:e(()=>[n(y,{class:"d-inline-flex pa-2 pt-0",style:{"min-width":"400px"}},{default:e(()=>[n(C,{dense:"",class:"align-end"},{default:e(()=>[n(g,{cols:"auto"},{default:e(()=>[n(_,{icon:"",color:t.rating==1?"success":"light",onClick:a[0]||(a[0]=s=>t.rating=t.rating==1?0:1),size:"x-small"},{default:e(()=>[n(c,{icon:"mdi-thumb-up"})]),_:1},8,["color"])]),_:1}),n(g,{cols:"auto"},{default:e(()=>[n(_,{icon:"",color:t.rating==-1?"error":"light",onClick:a[1]||(a[1]=s=>t.rating=t.rating==-1?0:-1),size:"x-small"},{default:e(()=>[n(c,{icon:"mdi-thumb-down"})]),_:1},8,["color"])]),_:1}),n(g,null,{default:e(()=>[n(b,{"hide-details":"",density:"compact",variant:"underlined",placeholder:"Optional Comment",modelValue:t.comment,"onUpdate:modelValue":a[2]||(a[2]=s=>t.comment=s)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["class"])):d("",!0)}}}),N=S($,[["__scopeId","data-v-06a007f4"]]);export{N as R};
