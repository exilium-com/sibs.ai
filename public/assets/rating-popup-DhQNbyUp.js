import{d as R,m as z,X as V,T as P,r as i,b as m,c as l,w as e,z as d,e as n,S as U,y as A,n as S,l as u,Y as h,k as $}from"./main-_0WdI2da.js";const B=R({__name:"rating-popup",props:{initialRating:{},initialComment:{},messageIndex:{}},setup(x){const r=x,t=z({ratingPopup:!1,rating:r.initialRating??0,comment:r.initialComment??""});let p=t.rating,_=t.comment,b=["thumbs-down","thumbs-none","thumbs-up"];function f(){const o=S();if(!o.currentAccount){u.error(u.context(),"no current account");return}if(!o.chatId){u.error(u.context(),"no chat id");return}(t.rating!=p||t.comment!=_)&&(r.messageIndex==null?h("/api/chat/{account_id}/{chat_id}/summary",{params:{path:{account_id:o.currentAccount.id,chat_id:o.chatId}},body:{rating:t.rating,comment:t.comment}}).then(()=>{p=t.rating,_=t.comment}):h("/api/chat/{account_id}/{chat_id}",{params:{path:{account_id:o.currentAccount.id,chat_id:o.chatId},query:{message_index:r.messageIndex}},body:{rating:t.rating,comment:t.comment}}).then(()=>{p=t.rating,_=t.comment}))}return V(()=>{f()}),P(()=>{f()}),(o,a)=>{const c=i("v-icon"),g=i("v-btn"),v=i("v-col"),C=i("v-text-field"),y=i("v-row"),k=i("v-container"),w=i("v-card"),I=i("v-menu");return o.gDevMode?(m(),l(g,{key:0,icon:"",variant:"plain",onClick:a[3]||(a[3]=s=>t.ratingPopup=!t.ratingPopup),class:U(A(b)[t.rating+1]),size:"x-small"},{default:e(()=>[t.rating==-1?(m(),l(c,{key:0,icon:"mdi-thumb-down"})):d("",!0),t.rating==0?(m(),l(c,{key:1,icon:"mdi-thumb-up-outline"})):d("",!0),t.rating==1?(m(),l(c,{key:2,icon:"mdi-thumb-up"})):d("",!0),n(I,{activator:"parent"},{default:e(()=>[n(w,null,{default:e(()=>[n(k,{class:"d-inline-flex pa-2 pt-0",style:{"min-width":"400px"}},{default:e(()=>[n(y,{dense:"",class:"align-end"},{default:e(()=>[n(v,{cols:"auto"},{default:e(()=>[n(g,{icon:"",color:t.rating==1?"success":"light",onClick:a[0]||(a[0]=s=>t.rating=t.rating==1?0:1),size:"x-small"},{default:e(()=>[n(c,{icon:"mdi-thumb-up"})]),_:1},8,["color"])]),_:1}),n(v,{cols:"auto"},{default:e(()=>[n(g,{icon:"",color:t.rating==-1?"error":"light",onClick:a[1]||(a[1]=s=>t.rating=t.rating==-1?0:-1),size:"x-small"},{default:e(()=>[n(c,{icon:"mdi-thumb-down"})]),_:1},8,["color"])]),_:1}),n(v,null,{default:e(()=>[n(C,{"hide-details":"",density:"compact",variant:"underlined",placeholder:"Optional Comment",modelValue:t.comment,"onUpdate:modelValue":a[2]||(a[2]=s=>t.comment=s)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["class"])):d("",!0)}}}),q=$(B,[["__scopeId","data-v-0629c3b6"]]);export{q as R};
