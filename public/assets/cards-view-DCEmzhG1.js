import{d as T,m as M,l as D,o as V,Y as K,v as $,r as a,b as l,c as _,Z as R,w as e,e as t,$ as j,a0 as q,s as E,a1 as X,g as v,z as k,y as b,A as I,F as U,B as G,x as m,K as H,f as P,a2 as z,M as Y,a3 as Z,L,a4 as J,u as O,a5 as Q,a6 as ee,T as te,a7 as W,k as ne}from"./main-CuD3QBrw.js";import{_ as oe}from"./mermaid-graph.vue_vue_type_style_index_0_lang-CXN8o6al.js";const C=T({__name:"card-favorite",props:{cardType:{}},setup(A){const n=M(),o=D({fav:!1,showFavoriteIcon:!0}),d=A;function s(){var r,p,w;let i=((w=(p=(r=n.person)==null?void 0:r.preferences)==null?void 0:p.favorites)==null?void 0:w.includes(d.cardType))??!1;return console.log("card-favorite.vue: getFavoriteState",d.cardType,i),i}V(()=>{o.fav=s(),o.showFavoriteIcon=K("showFavoriteIcon",!0)}),$(()=>n.person,()=>{o.fav=s()});async function u(){var h,S,y,g,f,F,x;if(o.fav==s()){console.log("card-favorite.vue: saveProfile: no change");return}let i={},r={};o.fav?r.favorites=((y=(S=(h=n.person)==null?void 0:h.preferences)==null?void 0:S.favorites)==null?void 0:y.concat(d.cardType))??[d.cardType]:r.favorites=((F=(f=(g=n.person)==null?void 0:g.preferences)==null?void 0:f.favorites)==null?void 0:F.filter(N=>N!=d.cardType))??[],i.preferences=r,console.log("card-favorite.vue: saveProfile updatePerson favorites = ",i.preferences.favorites,"array lenght = ",(x=i.preferences.favorites)==null?void 0:x.length);const{data:p,error:w}=await E("/api/person/me",{body:i});w?console.error(w):console.log("card-favorite.vue: saveProfile returns",p),await X()}function c(){o.fav=!o.fav,u()}return(i,r)=>{const p=a("v-btn"),w=a("v-card");return l(),_(w,{id:d.cardType},R({default:e(()=>[q(i.$slots,"default")]),_:2},[o.showFavoriteIcon?{name:"append",fn:e(()=>[t(p,{icon:o.fav?"mdi-heart":"mdi-heart-outline",variant:"plain",onClick:j(c,["prevent"])},null,8,["icon"])]),key:"0"}:void 0]),1032,["id"])}}}),ae={key:0},re=T({__name:"card-weather",props:{city:{},weather:{},temperature:{},temperature_unit:{},humidity:{},wind_speed:{},metric:{type:Boolean},icon:{},alert:{}},setup(A){const n=A;let o=[{day:"Tuesday",icon:"mdi-white-balance-sunny",temp:"24°/12°"},{day:"Wednesday",icon:"mdi-white-balance-sunny",temp:"22°/14°"},{day:"Thursday",icon:"mdi-cloud",temp:"25°/15°"}];function d(u){return Math.floor(u*1.60934)}const s=D({wind:n.metric?Math.floor(n.wind_speed)+"km/h":d(n.wind_speed)+"mph",expand:!1});return(u,c)=>{const i=a("v-img"),r=a("v-avatar"),p=a("v-col"),w=a("v-row"),h=a("v-icon"),S=a("v-card-text"),y=a("v-list-item"),g=a("v-list"),f=a("v-expand-transition"),F=a("v-divider"),x=a("v-btn"),N=a("v-card-actions");return l(),_(C,{cardType:"Weather",title:n.city,subtitle:n.weather},{default:e(()=>[t(S,{class:"py-0"},{default:e(()=>[t(w,{class:"align-center"},{default:e(()=>[t(p,null,{default:e(()=>[t(r,{size:"x-large"},{default:e(()=>[t(i,{src:n.icon},null,8,["src"])]),_:1})]),_:1}),t(p,{class:"text-h5 text-right"},{default:e(()=>[v(k(n.temperature)+" ° "+k(n.temperature_unit),1)]),_:1})]),_:1}),n.alert?(l(),_(w,{key:0},{default:e(()=>[t(p,null,{default:e(()=>[t(h,{icon:"mdi-alert",size:"18",color:"error",class:"me-1 pb-1"}),v(" "+k(n.alert),1)]),_:1})]),_:1})):b("",!0),t(w,{class:"pb-6 align-center"},{default:e(()=>[t(p,{cols:"6"},{default:e(()=>[t(h,{icon:"mdi-weather-windy"}),v(" "+k(s.wind),1)]),_:1}),t(p,{cols:"6",class:"text-right"},{default:e(()=>[t(h,{icon:"mdi-water-percent"}),v(" "+k(n.humidity)+"% ",1)]),_:1})]),_:1})]),_:1}),t(f,null,{default:e(()=>[s.expand?(l(),I("div",ae,[t(g,{class:"bg-transparent"},{default:e(()=>[(l(!0),I(U,null,G(m(o),B=>(l(),_(y,{key:B.day,title:B.day,"append-icon":B.icon,subtitle:B.temp},null,8,["title","append-icon","subtitle"]))),128))]),_:1})])):b("",!0)]),_:1}),t(F),t(N,null,{default:e(()=>[t(x,{onClick:c[0]||(c[0]=B=>s.expand=!s.expand)},{default:e(()=>[v(k(s.expand?"Hide Forecast":"Forecast"),1)]),_:1})]),_:1})]),_:1},8,["title","subtitle"])}}}),se={class:"mb-1"},ce={class:"font-weight-normal"},ie=T({__name:"card-today",setup(A){const n=D({expand:!1});let o=[{message:"Take cholesterol pill",time:"10:42am",color:"deep-purple-lighten-1",medicines:!0},{message:"Prepare to leave for dentist appointment",time:"11:45am",color:"green",medicines:!1},{message:"Take fiber pills",time:"3pm",color:"deep-purple-lighten-1",medicines:!0}],d=H(()=>n.expand?o:o.slice(0,1));return(s,u)=>{const c=a("v-icon"),i=a("v-card-item"),r=a("v-btn"),p=a("v-col"),w=a("v-row"),h=a("v-timeline-item"),S=a("v-timeline"),y=a("v-card-text"),g=a("v-expand-transition"),f=a("v-divider"),F=a("v-card-actions");return l(),_(C,{cardType:"Today",title:"Today"},{default:e(()=>[t(i,null,{subtitle:e(()=>[t(c,{icon:"mdi-clock",size:"18",color:"error",class:"me-1 pb-1"}),v(" Sunday, Feb 4th, 8:55AM ")]),_:1}),t(y,null,{default:e(()=>[t(S,{density:"compact",align:"start"},{default:e(()=>[(l(!0),I(U,null,G(m(d),x=>(l(),_(h,{key:x.time,"dot-color":x.color,size:"x-small"},{default:e(()=>[P("div",se,[P("div",ce,[P("strong",null,k(x.time),1)]),P("div",null,k(x.message),1),x.medicines?(l(),_(w,{key:0},{default:e(()=>[t(p,null,{default:e(()=>[t(r,{color:"primary",class:"mt-2"},{default:e(()=>[v("Taken")]),_:1})]),_:1}),t(p,null,{default:e(()=>[t(r,{color:"primary",class:"mt-2"},{default:e(()=>[v("Skipped")]),_:1})]),_:1})]),_:1})):b("",!0)])]),_:2},1032,["dot-color"]))),128))]),_:1})]),_:1}),t(g),t(f),t(F,null,{default:e(()=>[t(r,{onClick:u[0]||(u[0]=x=>n.expand=!n.expand)},{default:e(()=>[v(k(n.expand?"See next reminder":"See all reminders"),1)]),_:1})]),_:1})]),_:1})}}}),le=T({__name:"card-news",setup(A){return(n,o)=>{const d=a("v-list-item"),s=a("v-list");return l(),_(C,{cardType:"News",title:"News"},{default:e(()=>[t(s,null,{default:e(()=>[t(d,{"prepend-icon":"mdi-format-float-left"},{default:e(()=>[v(" 49ers win and go to super-bowl, new recipe for a healthy breakfast ")]),_:1})]),_:1})]),_:1})}}}),ue=T({__name:"card-chats",setup(A){const n=M();return(o,d)=>{var c;const s=a("v-list-item"),u=a("v-list");return l(),_(C,{cardType:"Chats",title:"Latest chats",subtitle:m(z)((c=m(n).currentAccount)==null?void 0:c.user)},{default:e(()=>[t(u,null,{default:e(()=>[t(s,{"prepend-icon":"mdi-comment-multiple",density:"compact"},{default:e(()=>[v(" Talked to Luana two hours ago, talked to Fabio 10 days ago ")]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),_e=P("br",null,null,-1),de=P("br",null,null,-1),pe=T({__name:"card-profile",setup(A){const n=M();return $(()=>{var o;return(o=n.currentAccount)==null?void 0:o.user},()=>{console.log("card-profile.vue: user changed")}),(o,d)=>{const s=a("v-col"),u=a("v-row"),c=a("v-card-text");return l(),_(C,{cardType:"Profile",title:"Profile",href:"/profile"},{default:e(()=>[t(c,null,{default:e(()=>[t(u,null,{default:e(()=>[t(s,{cols:"auto"},{default:e(()=>{var i,r,p;return[t(Y,{picture:(i=m(n).currentAccount)==null?void 0:i.user.avatar,firstName:(r=m(n).currentAccount)==null?void 0:r.user.given_name,lastName:(p=m(n).currentAccount)==null?void 0:p.user.family_name},null,8,["picture","firstName","lastName"])]}),_:1}),t(s,{cols:"auto"},{default:e(()=>{var i,r,p;return[v(k(m(z)((i=m(n).currentAccount)==null?void 0:i.user))+" ",1),_e,v(" "+k((r=m(n).currentAccount)==null?void 0:r.user.email)+" ",1),de,v(" "+k(m(Z)((p=m(n).currentAccount)==null?void 0:p.user))+" years old ",1)]}),_:1})]),_:1})]),_:1})]),_:1})}}}),me=T({__name:"card-family",setup(A){const n=M();$(()=>{var s;return(s=n.currentAccount)==null?void 0:s.user},()=>{console.log("card-family.vue: user changed"),d()});const o=D({familyMap:void 0});async function d(){var c;console.log("fetchFamily");const{data:s,error:u}=await L("/api/person/me/family",{params:{query:{format:"mermaid_mindmap"}}});u||s.mermaid_mindmap==null?(o.familyMap=`mindmap
  id((**${(c=n.currentAccount)==null?void 0:c.user.given_name}**<br>*self*))
  :::self level0
`,u&&console.error(u)):(o.familyMap=s.mermaid_mindmap,console.log(o.familyMap))}return V(async()=>{await d()}),(s,u)=>(l(),_(C,{cardType:"Family",title:"Family",href:"/family"},{default:e(()=>[t(oe,{content:o.familyMap,disablePanzoom:!0,onClick:u[0]||(u[0]=j(()=>{},["prevent"]))},null,8,["content"])]),_:1}))}}),fe=P("div",{class:"subheading font-weight-light text-grey"}," ??? ",-1),ve=P("span",{class:"text-caption text-grey font-weight-light"},"Last interaction 26 minutes ago",-1),he=T({__name:"card-usage",setup(A){const n=M();$(()=>{var u;return(u=n.currentAccount)==null?void 0:u.user},()=>{console.log("card-profile.vue: user changed")});const o=[["#222"],["#42b3f4"],["red","orange","yellow"],["purple","violet"],["#00c6ff","#F0F","#FF0"],["#f72047","#ffd200","#1feaea"]],d=[0,3,6,9,12,15,18,21],s=[200,675,410,390,310,460,250,240];return(u,c)=>{var S;const i=a("v-sparkline"),r=a("v-container"),p=a("v-divider"),w=a("v-icon"),h=a("v-card-text");return l(),_(C,{cardType:"Usage",title:"Usage",subtitle:m(z)((S=m(n).currentAccount)==null?void 0:S.user)+"'s interactions",class:"overflow-visible"},{default:e(()=>[t(r,null,{default:e(()=>[t(i,{labels:d,"model-value":s,gradient:o[2],smooth:!0,padding:"8","line-width":"6","auto-line-width":!1,"stroke-linecap":"round","gradient-direction":"top",fill:!1,type:"bar","auto-draw":""},null,8,["gradient"])]),_:1}),t(h,{class:"pt-0"},{default:e(()=>[fe,t(p,{class:"my-2"}),t(w,{class:"me-2",size:"small"},{default:e(()=>[v(" mdi-clock ")]),_:1}),ve]),_:1})]),_:1},8,["subtitle"])}}}),ye=T({__name:"card-meds",setup(A){const n=M();return $(()=>{var o;return(o=n.currentAccount)==null?void 0:o.user},()=>{console.log("card-profile.vue: user changed")}),(o,d)=>{var c;const s=a("v-list-item"),u=a("v-list");return l(),_(C,{cardType:"Meds",title:"Medications",subtitle:m(z)((c=m(n).currentAccount)==null?void 0:c.user)+"'s list",href:"/profile"},{default:e(()=>[t(u,null,{default:e(()=>[t(s,{"prepend-icon":"mdi-pill-multiple"},{default:e(()=>[v(" Atovarstatin, Vitamin D, Levothyroxine, Vitamin C, Aspirin, Vitamin B-12 ")]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),ge=T({__name:"card-sharing",setup(A){const n=M();$(()=>{var s;return(s=n.currentAccount)==null?void 0:s.user},()=>{console.log("card-sharing.vue: user changed"),d()});const o=D({sharingCount:0});async function d(){var s,u;if(o.sharingCount=0,(s=n.currentAccount)!=null&&s.id){const{data:c,error:i}=await L("/api/account/{account_id}/admins",{params:{path:{account_id:(u=n.currentAccount)==null?void 0:u.id}}});i&&console.error(i),o.sharingCount=c?c.length-1:0}}return V(async()=>{await d()}),(s,u)=>{var r;const c=a("v-list-item"),i=a("v-list");return l(),_(C,{cardType:"Sharing",title:"Sharing",subtitle:m(z)((r=m(n).currentAccount)==null?void 0:r.user),to:"/sharing"},{default:e(()=>[t(i,null,{default:e(()=>[t(c,{"prepend-icon":"mdi-human-greeting-variant"},{default:e(()=>[o.sharingCount>0?(l(),I(U,{key:0},[v(" Sharing data with "+k(o.sharingCount)+" person"+k(o.sharingCount>1?"s":""),1)],64)):(l(),I(U,{key:1},[v(" Not sharing with anyone yet ")],64)),m(n).invitationCount>0?(l(),I(U,{key:2},[v(" , "+k(m(n).invitationCount)+" pending invitation"+k(m(n).invitationCount>1?"s":""),1)],64)):b("",!0)]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),we=T({__name:"card-concerns",setup(A){const n=M();return $(()=>{var o;return(o=n.currentAccount)==null?void 0:o.user},()=>{console.log("card-concerns.vue: user changed")}),(o,d)=>{var i;const s=a("v-icon"),u=a("v-list-item"),c=a("v-list");return l(),_(C,{cardType:"Concerns",title:"Concerns",subtitle:m(z)((i=m(n).currentAccount)==null?void 0:i.user)},{default:e(()=>[t(c,null,{default:e(()=>[t(u,null,{prepend:e(()=>[t(s,{color:"red"},{default:e(()=>[v("mdi-alert")]),_:1})]),default:e(()=>[v(" Asked emergency contact to call ")]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),xe=T({__name:"card-interests",setup(A){const n=M();return $(()=>{var o;return(o=n.currentAccount)==null?void 0:o.user},()=>{console.log("card-interests.vue: user changed")}),(o,d)=>{var c;const s=a("v-list-item"),u=a("v-list");return l(),_(C,{cardType:"Interests",title:"Interests",subtitle:m(z)((c=m(n).currentAccount)==null?void 0:c.user)},{default:e(()=>[t(u,null,{default:e(()=>[t(s,{"prepend-icon":"mdi-star"},{default:e(()=>[v(" Sports, Hiking, Biking, Reading, Cooking, Gardening ")]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),be={key:0,class:"pt-4 text-end"},ke=T({__name:"cards-view",props:{onlyFavorites:{type:Boolean}},setup(A){const n=A;let o=J(!n.onlyFavorites);const{isAuthenticated:d}=O();console.log(">>>> home page, isAuthenticated",d.value);const{xs:s,sm:u}=Q(),c=H(()=>u.value||s.value?12:6),i=M(),r=D({daily_updates:void 0,city:void 0,favorites:[]});function p(){var y,g,f,F,x,N;r.favorites=((g=(y=i.person)==null?void 0:y.preferences)==null?void 0:g.favorites)??[],console.log("cards-view.vue: getFavorites person = ","person = ",i.person,"preferences =",(f=i.person)==null?void 0:f.preferences,"favorites = ",(x=(F=i.person)==null?void 0:F.preferences)==null?void 0:x.favorites,"array length = ",(N=r.favorites)==null?void 0:N.length)}function w(y){return r.favorites.includes(y)}function h(y){return o.value||w(y)}V(()=>{p(),ee("showFavoriteIcon",o)}),$(()=>i.person,()=>{p()}),$(()=>[i.currentAccount],async(y,g)=>{var f,F;i.currentAccount&&(console.log("watch: currentAccount changed, fetching daily updates",y,g),await S(),(F=(f=r.daily_updates)==null?void 0:f.weather)!=null&&F.city?r.city=[r.daily_updates.weather.city,r.daily_updates.weather.country].filter(Boolean).join(", "):r.city="")},{immediate:!0});async function S(){if(!i.currentAccount)return;const{data:y,error:g}=await L("/api/account/{account_id}/daily_updates",{params:{path:{account_id:i.currentAccount.id}}});g&&console.error("fetchDailyUpdates",g),y&&(console.log("fetchDailyUpdates",y),r.daily_updates=y)}return(y,g)=>{const f=a("v-col"),F=a("v-row"),x=a("v-btn"),N=a("v-container");return l(),_(N,{class:"v-col-sm-12 v-col-lg-6"},{default:e(()=>[t(F,{dense:""},{default:e(()=>[t(te,{name:"grow"},{default:e(()=>[h("Today")?(l(),_(f,{key:0,cols:c.value},{default:e(()=>[t(ie,{text1:"Dentist appointment",text2:"Tomorrow at 10am"})]),_:1},8,["cols"])):b("",!0),h("Weather")&&r.daily_updates&&r.daily_updates.weather?(l(),_(f,{key:1,cols:c.value},{default:e(()=>[t(re,{height:"100%",city:r.city??"-",weather:r.daily_updates.weather.description,temperature:r.daily_updates.weather.temperature,temperature_unit:"C",icon:r.daily_updates.weather.icon,wind_speed:r.daily_updates.weather.wind_speed,metric:!0,humidity:r.daily_updates.weather.humidity},null,8,["city","weather","temperature","icon","wind_speed","humidity"])]),_:1},8,["cols"])):b("",!0),h("Chats")?(l(),_(f,{key:2,cols:c.value},{default:e(()=>[t(ue,{height:"100%"})]),_:1},8,["cols"])):b("",!0),h("News")?(l(),_(f,{key:3,cols:c.value},{default:e(()=>[t(le,{height:"100%"})]),_:1},8,["cols"])):b("",!0),h("Profile")?(l(),_(f,{key:4,cols:c.value},{default:e(()=>[t(pe,{height:"100%"})]),_:1},8,["cols"])):b("",!0),h("Family")?(l(),_(f,{key:5,cols:c.value},{default:e(()=>[t(me,{height:"100%"})]),_:1},8,["cols"])):b("",!0),h("Usage")?(l(),_(f,{key:6,cols:c.value},{default:e(()=>[t(he,{height:"100%"})]),_:1},8,["cols"])):b("",!0),h("Meds")?(l(),_(f,{key:7,cols:c.value},{default:e(()=>[t(ye,{height:"100%"})]),_:1},8,["cols"])):b("",!0),h("Sharing")?(l(),_(f,{key:8,cols:c.value},{default:e(()=>[t(ge,{height:"100%"})]),_:1},8,["cols"])):b("",!0),h("Concerns")?(l(),_(f,{key:9,cols:c.value},{default:e(()=>[t(we,{height:"100%"})]),_:1},8,["cols"])):b("",!0),h("Interests")?(l(),_(f,{key:10,cols:c.value},{default:e(()=>[t(xe,{height:"100%"})]),_:1},8,["cols"])):b("",!0)]),_:1})]),_:1}),n.onlyFavorites?(l(),I("div",be,[m(o)?(l(),_(x,{key:1,block:"",variant:"plain",onClick:g[1]||(g[1]=B=>W(o)?o.value=!1:o=!1)},{default:e(()=>[v("Show favorites")]),_:1})):(l(),_(x,{key:0,block:"",variant:"plain",onClick:g[0]||(g[0]=B=>W(o)?o.value=!0:o=!0)},{default:e(()=>[v("Show more")]),_:1}))])):b("",!0)]),_:1})}}}),Te=ne(ke,[["__scopeId","data-v-9cb7f300"]]);export{Te as F};
