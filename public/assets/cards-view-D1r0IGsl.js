import{d as F,n as N,m as L,o as D,Z as q,x as M,r as o,b as u,c as d,$ as E,w as e,e as t,a0 as G,a1 as K,l as r,t as X,a2 as Z,g as h,A,z as k,B as z,F as U,C as H,y as f,L as R,f as I,a3 as V,N as J,a4 as O,M as W,a5 as Q,u as Y,a6 as ee,a7 as te,U as ne,a8 as j,k as ae}from"./main-_0WdI2da.js";import{_ as oe}from"./mermaid-graph.vue_vue_type_style_index_0_lang-DC8uaBcZ.js";const $=F({__name:"card-favorite",props:{cardType:{}},setup(T){const n=N(),a=L({fav:!1,showFavoriteIcon:!0}),p=T;function c(){var s,m,x;let l=((x=(m=(s=n.person)==null?void 0:s.preferences)==null?void 0:m.favorites)==null?void 0:x.includes(p.cardType))??!1;return r.debug(r.context(),p.cardType,l),l}D(()=>{a.fav=c(),a.showFavoriteIcon=q("showFavoriteIcon",!0)}),M(()=>n.person,()=>{a.fav=c()});async function _(){var y,S,g,w,v,C,b;if(a.fav==c()){r.debug(r.context(),"no change");return}let l={},s={};a.fav?s.favorites=((g=(S=(y=n.person)==null?void 0:y.preferences)==null?void 0:S.favorites)==null?void 0:g.concat(p.cardType))??[p.cardType]:s.favorites=((C=(v=(w=n.person)==null?void 0:w.preferences)==null?void 0:v.favorites)==null?void 0:C.filter(B=>B!=p.cardType))??[],l.preferences=s,r.debug(r.context(),"favorites = ",l.preferences.favorites,"array length = ",(b=l.preferences.favorites)==null?void 0:b.length);const{data:m,error:x}=await X("/api/person/me",{body:l});x?r.error(r.context(),x):r.debug(r.context(),{data:m}),await Z()}function i(){a.fav=!a.fav,_()}return(l,s)=>{const m=o("v-btn"),x=o("v-card");return u(),d(x,{id:p.cardType},E({default:e(()=>[K(l.$slots,"default")]),_:2},[a.showFavoriteIcon?{name:"append",fn:e(()=>[t(m,{icon:a.fav?"mdi-heart":"mdi-heart-outline",variant:"plain",onClick:G(i,["prevent"])},null,8,["icon"])]),key:"0"}:void 0]),1032,["id"])}}}),re={key:0},se=F({__name:"card-weather",props:{city:{},weather:{},temperature:{},temperature_unit:{},humidity:{},wind_speed:{},metric:{type:Boolean},icon:{},alert:{}},setup(T){const n=T;let a=[{day:"Tuesday",icon:"mdi-white-balance-sunny",temp:"24°/12°"},{day:"Wednesday",icon:"mdi-white-balance-sunny",temp:"22°/14°"},{day:"Thursday",icon:"mdi-cloud",temp:"25°/15°"}];function p(_){return Math.floor(_*1.60934)}const c=L({wind:n.metric?Math.floor(n.wind_speed)+"km/h":p(n.wind_speed)+"mph",expand:!1});return(_,i)=>{const l=o("v-img"),s=o("v-avatar"),m=o("v-col"),x=o("v-row"),y=o("v-icon"),S=o("v-card-text"),g=o("v-list-item"),w=o("v-list"),v=o("v-expand-transition"),C=o("v-divider"),b=o("v-btn"),B=o("v-card-actions");return u(),d($,{cardType:"Weather",title:n.city,subtitle:n.weather},{default:e(()=>[t(S,{class:"py-0"},{default:e(()=>[t(x,{class:"align-center"},{default:e(()=>[t(m,null,{default:e(()=>[t(s,{size:"x-large"},{default:e(()=>[t(l,{src:n.icon},null,8,["src"])]),_:1})]),_:1}),t(m,{class:"text-h5 text-right"},{default:e(()=>[h(A(n.temperature)+" ° "+A(n.temperature_unit),1)]),_:1})]),_:1}),n.alert?(u(),d(x,{key:0},{default:e(()=>[t(m,null,{default:e(()=>[t(y,{icon:"mdi-alert",size:"18",color:"error",class:"me-1 pb-1"}),h(" "+A(n.alert),1)]),_:1})]),_:1})):k("",!0),t(x,{class:"pb-6 align-center"},{default:e(()=>[t(m,{cols:"6"},{default:e(()=>[t(y,{icon:"mdi-weather-windy"}),h(" "+A(c.wind),1)]),_:1}),t(m,{cols:"6",class:"text-right"},{default:e(()=>[t(y,{icon:"mdi-water-percent"}),h(" "+A(n.humidity)+"% ",1)]),_:1})]),_:1})]),_:1}),t(v,null,{default:e(()=>[c.expand?(u(),z("div",re,[t(w,{class:"bg-transparent"},{default:e(()=>[(u(!0),z(U,null,H(f(a),P=>(u(),d(g,{key:P.day,title:P.day,"append-icon":P.icon,subtitle:P.temp},null,8,["title","append-icon","subtitle"]))),128))]),_:1})])):k("",!0)]),_:1}),t(C),t(B,null,{default:e(()=>[t(b,{onClick:i[0]||(i[0]=P=>c.expand=!c.expand)},{default:e(()=>[h(A(c.expand?"Hide Forecast":"Forecast"),1)]),_:1})]),_:1})]),_:1},8,["title","subtitle"])}}}),ce={class:"mb-1"},ie={class:"font-weight-normal"},le=F({__name:"card-today",setup(T){const n=L({expand:!1});let a=[{message:"Take cholesterol pill",time:"10:42am",color:"deep-purple-lighten-1",medicines:!0},{message:"Prepare to leave for dentist appointment",time:"11:45am",color:"green",medicines:!1},{message:"Take fiber pills",time:"3pm",color:"deep-purple-lighten-1",medicines:!0}],p=R(()=>n.expand?a:a.slice(0,1));return(c,_)=>{const i=o("v-icon"),l=o("v-card-item"),s=o("v-btn"),m=o("v-col"),x=o("v-row"),y=o("v-timeline-item"),S=o("v-timeline"),g=o("v-card-text"),w=o("v-expand-transition"),v=o("v-divider"),C=o("v-card-actions");return u(),d($,{cardType:"Today",title:"Today"},{default:e(()=>[t(l,null,{subtitle:e(()=>[t(i,{icon:"mdi-clock",size:"18",color:"error",class:"me-1 pb-1"}),h(" Sunday, Feb 4th, 8:55AM ")]),_:1}),t(g,null,{default:e(()=>[t(S,{density:"compact",align:"start"},{default:e(()=>[(u(!0),z(U,null,H(f(p),b=>(u(),d(y,{key:b.time,"dot-color":b.color,size:"x-small"},{default:e(()=>[I("div",ce,[I("div",ie,[I("strong",null,A(b.time),1)]),I("div",null,A(b.message),1),b.medicines?(u(),d(x,{key:0},{default:e(()=>[t(m,null,{default:e(()=>[t(s,{color:"primary",class:"mt-2"},{default:e(()=>[h("Taken")]),_:1})]),_:1}),t(m,null,{default:e(()=>[t(s,{color:"primary",class:"mt-2"},{default:e(()=>[h("Skipped")]),_:1})]),_:1})]),_:1})):k("",!0)])]),_:2},1032,["dot-color"]))),128))]),_:1})]),_:1}),t(w),t(v),t(C,null,{default:e(()=>[t(s,{onClick:_[0]||(_[0]=b=>n.expand=!n.expand)},{default:e(()=>[h(A(n.expand?"See next reminder":"See all reminders"),1)]),_:1})]),_:1})]),_:1})}}}),ue=F({__name:"card-news",setup(T){return(n,a)=>{const p=o("v-list-item"),c=o("v-list");return u(),d($,{cardType:"News",title:"News"},{default:e(()=>[t(c,null,{default:e(()=>[t(p,{"prepend-icon":"mdi-format-float-left"},{default:e(()=>[h(" 49ers win and go to super-bowl, new recipe for a healthy breakfast ")]),_:1})]),_:1})]),_:1})}}}),_e=F({__name:"card-chats",setup(T){const n=N();return(a,p)=>{var i;const c=o("v-list-item"),_=o("v-list");return u(),d($,{cardType:"Chats",title:"Latest chats",subtitle:f(V)((i=f(n).currentAccount)==null?void 0:i.user)},{default:e(()=>[t(_,null,{default:e(()=>[t(c,{"prepend-icon":"mdi-comment-multiple",density:"compact"},{default:e(()=>[h(" Talked to Luana two hours ago, talked to Fabio 10 days ago ")]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),de=I("br",null,null,-1),pe=I("br",null,null,-1),me=F({__name:"card-profile",setup(T){const n=N();return M(()=>{var a;return(a=n.currentAccount)==null?void 0:a.user},()=>{r.debug(r.context(),"user changed")}),(a,p)=>{const c=o("v-col"),_=o("v-row"),i=o("v-card-text");return u(),d($,{cardType:"Profile",title:"Profile",href:"/profile"},{default:e(()=>[t(i,null,{default:e(()=>[t(_,null,{default:e(()=>[t(c,{cols:"auto"},{default:e(()=>{var l,s,m;return[t(J,{picture:(l=f(n).currentAccount)==null?void 0:l.user.avatar,firstName:(s=f(n).currentAccount)==null?void 0:s.user.given_name,lastName:(m=f(n).currentAccount)==null?void 0:m.user.family_name},null,8,["picture","firstName","lastName"])]}),_:1}),t(c,{cols:"auto"},{default:e(()=>{var l,s,m;return[h(A(f(V)((l=f(n).currentAccount)==null?void 0:l.user))+" ",1),de,h(" "+A((s=f(n).currentAccount)==null?void 0:s.user.email)+" ",1),pe,h(" "+A(f(O)((m=f(n).currentAccount)==null?void 0:m.user))+" years old ",1)]}),_:1})]),_:1})]),_:1})]),_:1})}}}),fe=F({__name:"card-family",setup(T){const n=N();M(()=>{var c;return(c=n.currentAccount)==null?void 0:c.user},()=>{r.debug(r.context(),"user changed"),p()});const a=L({familyMap:void 0});async function p(){var i;r.debug(r.context(),"entering");const{data:c,error:_}=await W("/api/person/me/family",{params:{query:{format:"mermaid_mindmap"}}});_||c.mermaid_mindmap==null?(a.familyMap=`mindmap
  id((**${(i=n.currentAccount)==null?void 0:i.user.given_name}**<br>*self*))
  :::self level0
`,_&&r.error(r.context(),_)):(a.familyMap=c.mermaid_mindmap,r.debug(r.context(),a.familyMap))}return D(async()=>{await p()}),(c,_)=>(u(),d($,{cardType:"Family",title:"Family",href:"/family"},{default:e(()=>[t(oe,{content:a.familyMap,disablePanzoom:!0,onClick:_[0]||(_[0]=G(()=>{},["prevent"]))},null,8,["content"])]),_:1}))}}),ve=I("div",{class:"subheading font-weight-light text-grey"}," ??? ",-1),he=I("span",{class:"text-caption text-grey font-weight-light"},"Last interaction 26 minutes ago",-1),ye=F({__name:"card-usage",setup(T){const n=N();M(()=>{var _;return(_=n.currentAccount)==null?void 0:_.user},()=>{r.debug(r.context(),"user changed")});const a=[["#222"],["#42b3f4"],["red","orange","yellow"],["purple","violet"],["#00c6ff","#F0F","#FF0"],["#f72047","#ffd200","#1feaea"]],p=[0,3,6,9,12,15,18,21],c=[200,675,410,390,310,460,250,240];return(_,i)=>{var S;const l=o("v-sparkline"),s=o("v-container"),m=o("v-divider"),x=o("v-icon"),y=o("v-card-text");return u(),d($,{cardType:"Usage",title:"Usage",subtitle:f(V)((S=f(n).currentAccount)==null?void 0:S.user)+"'s interactions",class:"overflow-visible"},{default:e(()=>[t(s,null,{default:e(()=>[t(l,{labels:p,"model-value":c,gradient:a[2],smooth:!0,padding:"8","line-width":"6","auto-line-width":!1,"stroke-linecap":"round","gradient-direction":"top",fill:!1,type:"bar","auto-draw":""},null,8,["gradient"])]),_:1}),t(y,{class:"pt-0"},{default:e(()=>[ve,t(m,{class:"my-2"}),t(x,{class:"me-2",size:"small"},{default:e(()=>[h(" mdi-clock ")]),_:1}),he]),_:1})]),_:1},8,["subtitle"])}}}),ge=F({__name:"card-meds",setup(T){const n=N();return M(()=>{var a;return(a=n.currentAccount)==null?void 0:a.user},()=>{r.debug(r.context(),"user changed")}),(a,p)=>{var i;const c=o("v-list-item"),_=o("v-list");return u(),d($,{cardType:"Meds",title:"Medications",subtitle:f(V)((i=f(n).currentAccount)==null?void 0:i.user)+"'s list",href:"/profile"},{default:e(()=>[t(_,null,{default:e(()=>[t(c,{"prepend-icon":"mdi-pill-multiple"},{default:e(()=>[h(" Atovarstatin, Vitamin D, Levothyroxine, Vitamin C, Aspirin, Vitamin B-12 ")]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),we=F({__name:"card-sharing",setup(T){const n=N();M(()=>{var c;return(c=n.currentAccount)==null?void 0:c.user},()=>{r.debug(r.context(),"user changed"),p()});const a=L({sharingCount:0});async function p(){var c,_;if(r.debug(r.context(),"entering"),a.sharingCount=0,(c=n.currentAccount)!=null&&c.id){const{data:i,error:l}=await W("/api/account/{account_id}/admins",{params:{path:{account_id:(_=n.currentAccount)==null?void 0:_.id}}});l&&r.error(r.context(),l),a.sharingCount=i?i.length-1:0}}return D(async()=>{await p()}),(c,_)=>{var s;const i=o("v-list-item"),l=o("v-list");return u(),d($,{cardType:"Sharing",title:"Sharing",subtitle:f(V)((s=f(n).currentAccount)==null?void 0:s.user),to:"/sharing"},{default:e(()=>[t(l,null,{default:e(()=>[t(i,{"prepend-icon":"mdi-human-greeting-variant"},{default:e(()=>[a.sharingCount>0?(u(),z(U,{key:0},[h(" Sharing data with "+A(a.sharingCount)+" person"+A(a.sharingCount>1?"s":""),1)],64)):(u(),z(U,{key:1},[h(" Not sharing with anyone yet ")],64)),f(n).invitationCount>0?(u(),z(U,{key:2},[h(" , "+A(f(n).invitationCount)+" pending invitation"+A(f(n).invitationCount>1?"s":""),1)],64)):k("",!0)]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),xe=F({__name:"card-concerns",setup(T){const n=N();return M(()=>{var a;return(a=n.currentAccount)==null?void 0:a.user},()=>{r.debug(r.context(),"user changed")}),(a,p)=>{var l;const c=o("v-icon"),_=o("v-list-item"),i=o("v-list");return u(),d($,{cardType:"Concerns",title:"Concerns",subtitle:f(V)((l=f(n).currentAccount)==null?void 0:l.user)},{default:e(()=>[t(i,null,{default:e(()=>[t(_,null,{prepend:e(()=>[t(c,{color:"red"},{default:e(()=>[h("mdi-alert")]),_:1})]),default:e(()=>[h(" Asked emergency contact to call ")]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),be=F({__name:"card-interests",setup(T){const n=N();return M(()=>{var a;return(a=n.currentAccount)==null?void 0:a.user},()=>{r.debug(r.context(),"user changed")}),(a,p)=>{var i;const c=o("v-list-item"),_=o("v-list");return u(),d($,{cardType:"Interests",title:"Interests",subtitle:f(V)((i=f(n).currentAccount)==null?void 0:i.user)},{default:e(()=>[t(_,null,{default:e(()=>[t(c,{"prepend-icon":"mdi-star"},{default:e(()=>[h(" Sports, Hiking, Biking, Reading, Cooking, Gardening ")]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),ke={key:0,class:"pt-4 text-end"},Ae=F({__name:"cards-view",props:{onlyFavorites:{type:Boolean}},setup(T){const n=T;let a=Q(!n.onlyFavorites);const{isAuthenticated:p}=Y();r.debug(r.context(),">>>> home page, isAuthenticated",p.value);const{xs:c,sm:_}=ee(),i=R(()=>_.value||c.value?12:6),l=N(),s=L({daily_updates:void 0,city:void 0,favorites:[]});function m(){var g,w,v,C,b,B;s.favorites=((w=(g=l.person)==null?void 0:g.preferences)==null?void 0:w.favorites)??[],r.debug(r.context(),"person = ",l.person,"preferences = ",(v=l.person)==null?void 0:v.preferences,"favorites = ",(b=(C=l.person)==null?void 0:C.preferences)==null?void 0:b.favorites,"array length = ",(B=s.favorites)==null?void 0:B.length)}function x(g){return s.favorites.includes(g)}function y(g){return a.value||x(g)}D(()=>{m(),te("showFavoriteIcon",a)}),M(()=>l.person,()=>{m()}),M(()=>[l.currentAccount],async(g,w)=>{var v,C;l.currentAccount&&(r.debug(r.context(),"currentAccount changed, fetching daily updates",{newValue:g},{oldValue:w}),await S(),(C=(v=s.daily_updates)==null?void 0:v.weather)!=null&&C.city?s.city=[s.daily_updates.weather.city,s.daily_updates.weather.country].filter(Boolean).join(", "):s.city="")},{immediate:!0});async function S(){if(!l.currentAccount)return;const{data:g,error:w}=await W("/api/account/{account_id}/daily_updates",{params:{path:{account_id:l.currentAccount.id}}});w&&r.error(r.context(),w),g&&(r.debug(r.context(),g),s.daily_updates=g)}return(g,w)=>{const v=o("v-col"),C=o("v-row"),b=o("v-btn"),B=o("v-container");return u(),d(B,{class:"v-col-sm-12 v-col-lg-6"},{default:e(()=>[t(C,{dense:""},{default:e(()=>[t(ne,{name:"grow"},{default:e(()=>[y("Today")?(u(),d(v,{key:0,cols:i.value},{default:e(()=>[t(le,{text1:"Dentist appointment",text2:"Tomorrow at 10am"})]),_:1},8,["cols"])):k("",!0),y("Weather")&&s.daily_updates&&s.daily_updates.weather?(u(),d(v,{key:1,cols:i.value},{default:e(()=>[t(se,{height:"100%",city:s.city??"-",weather:s.daily_updates.weather.description,temperature:s.daily_updates.weather.temperature,temperature_unit:"C",icon:s.daily_updates.weather.icon,wind_speed:s.daily_updates.weather.wind_speed,metric:!0,humidity:s.daily_updates.weather.humidity},null,8,["city","weather","temperature","icon","wind_speed","humidity"])]),_:1},8,["cols"])):k("",!0),y("Chats")?(u(),d(v,{key:2,cols:i.value},{default:e(()=>[t(_e,{height:"100%"})]),_:1},8,["cols"])):k("",!0),y("News")?(u(),d(v,{key:3,cols:i.value},{default:e(()=>[t(ue,{height:"100%"})]),_:1},8,["cols"])):k("",!0),y("Profile")?(u(),d(v,{key:4,cols:i.value},{default:e(()=>[t(me,{height:"100%"})]),_:1},8,["cols"])):k("",!0),y("Family")?(u(),d(v,{key:5,cols:i.value},{default:e(()=>[t(fe,{height:"100%"})]),_:1},8,["cols"])):k("",!0),y("Usage")?(u(),d(v,{key:6,cols:i.value},{default:e(()=>[t(ye,{height:"100%"})]),_:1},8,["cols"])):k("",!0),y("Meds")?(u(),d(v,{key:7,cols:i.value},{default:e(()=>[t(ge,{height:"100%"})]),_:1},8,["cols"])):k("",!0),y("Sharing")?(u(),d(v,{key:8,cols:i.value},{default:e(()=>[t(we,{height:"100%"})]),_:1},8,["cols"])):k("",!0),y("Concerns")?(u(),d(v,{key:9,cols:i.value},{default:e(()=>[t(xe,{height:"100%"})]),_:1},8,["cols"])):k("",!0),y("Interests")?(u(),d(v,{key:10,cols:i.value},{default:e(()=>[t(be,{height:"100%"})]),_:1},8,["cols"])):k("",!0)]),_:1})]),_:1}),n.onlyFavorites?(u(),z("div",ke,[f(a)?(u(),d(b,{key:1,block:"",variant:"plain",onClick:w[1]||(w[1]=P=>j(a)?a.value=!1:a=!1)},{default:e(()=>[h("Show favorites")]),_:1})):(u(),d(b,{key:0,block:"",variant:"plain",onClick:w[0]||(w[0]=P=>j(a)?a.value=!0:a=!0)},{default:e(()=>[h("Show more")]),_:1}))])):k("",!0)]),_:1})}}}),Fe=ae(Ae,[["__scopeId","data-v-cabebb79"]]);export{Fe as F};
